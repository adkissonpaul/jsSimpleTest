<script src="../simpleTest.js"></script>
<script>
/*

The lastIndexOf() method returns the last index at which a given element can be found in the array, or -1 if it is not present. The array is searched backwards, starting at fromIndex.

  Function signature:
    indexOf([array], searchElement,[, fromIndex])
  
    NATIVE: arr.lastIndexOf(searchElement[, fromIndex])

  Callback parameters:
    searchElement 
    fromIndex (the index to start the search at.) Defaults to array.length - 1.

  Return value: 
    The last index of the element in the array.
    -1 if not found.

  Requirements:
   COMPLETE: It should return the last index of a matching element in an array.
   COMPLETE: It should use strict equality (===) to compare searchElement to elements of the array.
   COMPLETE: It should return -1 if no matching element.
   COMPLETE: It should start search at fromIndex.
   COMPLETE: It should search whole array if fromIndex is greater than or equal to the length of the array.
   It should take a negative index as the offset from the end of the array.
   It should search from back to front.

*/

function lastIndexOf(array, searchElement, fromIndex){
  var length = array.length
//Checks if there is a fromIndex.
  if(!fromIndex) {
    fromIndex = length - 1;
  }
//Checks if the index is negative, then does the weird offset thing.
  if(fromIndex < 0) { 
    fromIndex = length + fromIndex;
  }

  for(var i = fromIndex; i >= 0; i--) {
   if (searchElement === array[i]) {
    return i;
   }
  }
  return -1;
};

tests({
  'It should return the last index of a matching element.': function() {
    var result = lastIndexOf([1, 2, 3], 3);
    eq(result, [2]);
  },
  'It should use strict equality (===) to compare searchElement to elements of the array.': function() {
    var result = lastIndexOf([1, 2, 3, '3'], 3);
    eq(result, [2]);
  },
  'It should return -1 if no matching element.': function() {
    var result = lastIndexOf([1, 2, 3], 4);
    eq(result, -1);
  },
  'It should start search at fromIndex.': function() {
    var result = lastIndexOf([3, 2, 1, 1], 1, 2)
    eq(result, 2)
  },
  'It should search whole array if fromIndex is greater than or equal to the length of the array.': function() {
    var result = lastIndexOf([1, 2, 3, 4], 1, 5)
    eq(result, 0)
  },
  'It should take a negative index as the offset from the end of the array.': function() {
    var testArray = [1, 2, 3, 4, 5];
    var result = lastIndexOf(testArray, 2, -3)
    var result2 = lastIndexOf(testArray, 3, -4)

    eq(result, 1);
    eq(result2, -1)
  }, 
  'It should search from back to front.': function () {
    var result = lastIndexOf([1, 2, 3], 1)
    eq(result, 0)
  }
});

</script>